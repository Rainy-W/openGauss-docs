# Risky Operations<a name="EN-US_TOPIC_0289897012"></a>

Strictly follow the operation guide and avoid the following risky operations:

[Table 1](#en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_t725e2ece7f7a4d5f962b2c314e7e836b)  describes forbidden operations during routine O&M.

**Table  1**  Forbidden operations

<a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_t725e2ece7f7a4d5f962b2c314e7e836b"></a>
<table><thead align="left"><tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_r9cf4967d6d5748e19f4c5710442a7f2a"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_abd7bf53f59164b05a71cc5092ff012e7"></a>Forbidden Operation</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a27373318761947a19205c4429c197f34"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a27373318761947a19205c4429c197f34"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a27373318761947a19205c4429c197f34"></a>Risk</p>
</th>
</tr>
</thead>
<tbody><tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_r8fb9b9ee04614ae4b19d6257175c7d09"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ad0c36ad81f124d0c937883d307633567"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ad0c36ad81f124d0c937883d307633567"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ad0c36ad81f124d0c937883d307633567"></a>Modify the file name, permission, or content, or delete any content in the data directory.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a21ffdbb8f4a247a1b7c2cd10a28823c5"></a>Serious errors occur on database nodes and cannot be fixed.</p>
</td>
</tr>
<tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_r8585d9fe35434479a273e3a0bba74407"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae436631e9128462698b0926b34aa1b3d"></a>Delete database system catalogs or their data.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a3ff42e36b6024ab8b9e26649757baa95"></a>Service operations cannot be properly performed.</p>
</td>
</tr>
</tbody>
</table>

[Table 2](#en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_tf7f1e2a0747f496baffa365814127a3c)  describes risky operations during routine O&M.

**Table  2**  Risky operations

<a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_tf7f1e2a0747f496baffa365814127a3c"></a>
<table><thead align="left"><tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_r00b800b9cfde4444a9745ace4f3f9771"><th class="cellrowborder" valign="top" width="9.839016098390161%" id="mcps1.2.7.1.1"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_ae1e8f48a5d714b55b61062efaf1446a2"></a>Category</p>
</th>
<th class="cellrowborder" valign="top" width="25.807419258074194%" id="mcps1.2.7.1.2"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_af94dcd3387914bfab8a99fcb9b86a3bf"></a>Risky Operation</p>
</th>
<th class="cellrowborder" valign="top" width="14.34856514348565%" id="mcps1.2.7.1.3"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a8eb8caf538f7477cb2bd9f7b3ff331b9"></a>Risk</p>
</th>
<th class="cellrowborder" valign="top" width="10.02899710028997%" id="mcps1.2.7.1.4"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a35ceee57bace428d8006b9f47830dc8c"></a>Risk Level</p>
</th>
<th class="cellrowborder" valign="top" width="28.257174282571746%" id="mcps1.2.7.1.5"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a78d5a52d12614b52996eedab4c17152a"></a>Preventive Measure</p>
</th>
<th class="cellrowborder" valign="top" width="11.71882811718828%" id="mcps1.2.7.1.6"><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a685c7ec384fd4081ab30aa32cda54d80"></a>Check Item</p>
</th>
</tr>
</thead>
<tbody><tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_r9f29fffa729b4cef856a23f7643fcf4d"><td class="cellrowborder" rowspan="3" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_a9c28b0c17e9546529917b54547cfa8cf"></a>Operations and maintenance</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p197141628113911"><a name="p197141628113911"></a><a name="p197141628113911"></a>Upgrade a database kernel.</p>
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p9714182823913"><a name="p9714182823913"></a><a name="p9714182823913"></a>Services are intermittently interrupted during the upgrade.</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p1671416287398"><a name="p1671416287398"></a><a name="p1671416287398"></a>High</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p8714152873919"><a name="p8714152873919"></a><a name="p8714152873919"></a>Perform the upgrade during off-peak hours. Before the upgrade, perform a comprehensive inspection on the database, eliminate key metric risks in advance, communicate with users about the impact and upgrade time window, and then perform the upgrade.</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p27141728133917"><a name="p27141728133917"></a><a name="p27141728133917"></a>Observe key metrics such as the SQL response delay, number of active sessions, number of threads, and dynamic memory usage.</p>
</td>
</tr>
<tr id="en-us_topic_0283140565_en-us_topic_0237088894_en-us_topic_0059777750_rba83f8b686b640b4beba9323a3097d29"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p72231853203915"><a name="p72231853203915"></a><a name="p72231853203915"></a>Kill processes.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p92231553133916"><a name="p92231553133916"></a><a name="p92231553133916"></a>If a DN process is killed, services may be intermittently interrupted and even a primary/standby switchover may be triggered. If the difference between the primary and standby nodes is large, the RTO risk is higher.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p1722315311394"><a name="p1722315311394"></a><a name="p1722315311394"></a>Medium</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p5223353153918"><a name="p5223353153918"></a><a name="p5223353153918"></a> Exercise caution when determining the necessity of killing processes during O&M. If processes need to be killed, notify users in advance.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p5224125363916"><a name="p5224125363916"></a><a name="p5224125363916"></a>Observe key metrics, such as the SQL response delay, number of active sessions, number of threads, dynamic memory usage, and primary/standby log difference.</p>
</td>
</tr>
<tr id="row370213843918"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p16921443403"><a name="p16921443403"></a><a name="p16921443403"></a>Kill sessions.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p1869219414402"><a name="p1869219414402"></a><a name="p1869219414402"></a>If a session is killed, client may be disconnected and service may be interrupted.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p156927444012"><a name="p156927444012"></a><a name="p156927444012"></a>Medium</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p196921946405"><a name="p196921946405"></a><a name="p196921946405"></a>Exercise caution when determining the necessity of killing sessions during O&M. If sessions need to be killed, notify users in advance.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p136927474019"><a name="p136927474019"></a><a name="p136927474019"></a>Observe key metrics such as the SQL response delay, number of active sessions, number of threads, and dynamic memory usage.</p>
</td>
</tr>
<tr id="en-us_topic_0283140565_en-us_topic_0237088894_row620571192516"><td class="cellrowborder" rowspan="3" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="en-us_topic_0283140565_en-us_topic_0237088894_p620551122514"><a name="en-us_topic_0283140565_en-us_topic_0237088894_p620551122514"></a><a name="en-us_topic_0283140565_en-us_topic_0237088894_p620551122514"></a>Configuration modification</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p1230920413411"><a name="p1230920413411"></a><a name="p1230920413411"></a>Modify the <strong>postgres.conf</strong> file.
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p173091947418"><a name="p173091947418"></a><a name="p173091947418"></a> If important configurations such as the port number in the file are modified, the database may fail to be started or connected.</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p73091542413"><a name="p73091542413"></a><a name="p73091542413"></a>Medium</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p1630914484120"><a name="p1630914484120"></a><a name="p1630914484120"></a> Do not manually modify the configurations. If you need to modify them, run the corresponding database operation commands after you are aware of the risks.</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p14309641413"><a name="p14309641413"></a><a name="p14309641413"></a>None</p>
</td>
</tr>
<tr id="row712319134116"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p15612820194117"><a name="p15612820194117"></a><a name="p15612820194117"></a> Modify the <strong>pg_hba.conf</strong> file.
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p126120206414"><a name="p126120206414"></a><a name="p126120206414"></a> If the mutual trust rules in the file are modified, the database may be attacked or the client may fail to connect to the database.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p13612172013412"><a name="p13612172013412"></a><a name="p13612172013412"></a>High</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p1961252034116"><a name="p1961252034116"></a><a name="p1961252034116"></a> Do not manually modify the configurations. If you need to modify them, run the gs_guc commands after you are aware of the risks.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p261232034116"><a name="p261232034116"></a><a name="p261232034116"></a>None</p>
</td>
</tr>
<tr id="row1951210531401"><td class="cellrowborder" valign="top" headers="mcps1.2.7.1.1 "><p id="p220529154112"><a name="p220529154112"></a><a name="p220529154112"></a>Modify some database configuration parameters.
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.2 "><p id="p5201429134116"><a name="p5201429134116"></a><a name="p5201429134116"></a>If some parameters are modified improperly, unexpected database behaviors may occur, including but not limited to statement delay increase, memory usage increase, and service connection errors.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.3 "><p id="p220132919413"><a name="p220132919413"></a><a name="p220132919413"></a>Medium</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.4 "><p id="p182092920416"><a name="p182092920416"></a><a name="p182092920416"></a>Before modifying parameters, carefully read the product documentation and accurately evaluate the impact. If the impact cannot be evaluated, contact Huawei technical support.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.7.1.5 "><p id="p8206295410"><a name="p8206295410"></a><a name="p8206295410"></a> Observe key metrics such as the SQL response delay, CPU usage, and memory usage.</p>
</td>
</tr>
<tr id="row8332772399"><td class="cellrowborder" valign="top" width="9.839016098390161%" headers="mcps1.2.7.1.1 "><p id="p13926240194112"><a name="p13926240194112"></a><a name="p13926240194112"></a>DDL change</p>
</td>
<td class="cellrowborder" valign="top" width="25.807419258074194%" headers="mcps1.2.7.1.2 "><p id="p092644024119"><a name="p092644024119"></a><a name="p092644024119"></a>Users perform DDL operations.
</td>
<td class="cellrowborder" valign="top" width="14.34856514348565%" headers="mcps1.2.7.1.3 "><p id="p1926134012416"><a name="p1926134012416"></a><a name="p1926134012416"></a>Most DDL statements use high-level locks to block queries and DML statements. As a result, services are blocked for a long time.</p>
</td>
<td class="cellrowborder" valign="top" width="10.02899710028997%" headers="mcps1.2.7.1.4 "><p id="p159266407417"><a name="p159266407417"></a><a name="p159266407417"></a>High</p>
</td>
<td class="cellrowborder" valign="top" width="28.257174282571746%" headers="mcps1.2.7.1.5 "><p id="p99271140144112"><a name="p99271140144112"></a><a name="p99271140144112"></a>Exercise caution when performing DDL operations. Perform DDL operations offline if possible. If DDL operations cannot be performed offline, set parameters such as the lock waiting duration to reduce the waiting time and prevent DDL operations from blocking services.</p>
</td>
<td class="cellrowborder" valign="top" width="11.71882811718828%" headers="mcps1.2.7.1.6 "><p id="p292734044113"><a name="p292734044113"></a><a name="p292734044113"></a>Observe key metrics such as the SQL response delay, number of active sessions, number of threads, and dynamic memory usage.</p>
</td>
</tr>
</tbody>
</table>
