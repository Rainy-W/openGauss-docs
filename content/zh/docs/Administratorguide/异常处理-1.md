# 异常处理<a name="ZH-CN_TOPIC_0242215059"></a>

如果发现检查结果异常，可以根据以下内容进行修复。

**表 1**  检查openGauss运行状态

<a name="zh-cn_topic_0237088800_t839e243ba9874e4d89255e791cd15811"></a>
<table><thead align="left"><tr id="zh-cn_topic_0237088800_rb4ac09be678a4c478332b72fc54c86da"><th class="cellrowborder" valign="top" width="20.59%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0237088800_a924b3b3672d54860a521ec49bc2c2b3a"><a name="zh-cn_topic_0237088800_a924b3b3672d54860a521ec49bc2c2b3a"></a><a name="zh-cn_topic_0237088800_a924b3b3672d54860a521ec49bc2c2b3a"></a>检查项</p>
</th>
<th class="cellrowborder" valign="top" width="22.21%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0237088800_ade62aaa16c324c4eadf75810f4af912d"><a name="zh-cn_topic_0237088800_ade62aaa16c324c4eadf75810f4af912d"></a><a name="zh-cn_topic_0237088800_ade62aaa16c324c4eadf75810f4af912d"></a>异常状态</p>
</th>
<th class="cellrowborder" valign="top" width="57.199999999999996%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0237088800_a52bda49fcd244ef18115c4f5ffd4269e"><a name="zh-cn_topic_0237088800_a52bda49fcd244ef18115c4f5ffd4269e"></a><a name="zh-cn_topic_0237088800_a52bda49fcd244ef18115c4f5ffd4269e"></a>处理方法</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0237088800_r8b77c6ca6c9d48cebfe2154085166c41"><td class="cellrowborder" rowspan="2" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_zh-cn_topic_0058967589_p652816918481"><a name="zh-cn_topic_0237088800_zh-cn_topic_0058967589_p652816918481"></a><a name="zh-cn_topic_0237088800_zh-cn_topic_0058967589_p652816918481"></a>CheckClusterState（检查openGauss状态）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_adce0fa99543c4cafbe1a80d682dd4528"><a name="zh-cn_topic_0237088800_adce0fa99543c4cafbe1a80d682dd4528"></a><a name="zh-cn_topic_0237088800_adce0fa99543c4cafbe1a80d682dd4528"></a>openGauss未启动或openGauss实例未启动</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_a7af774e26cbc4ee2a375102e289cdb60"><a name="zh-cn_topic_0237088800_a7af774e26cbc4ee2a375102e289cdb60"></a><a name="zh-cn_topic_0237088800_a7af774e26cbc4ee2a375102e289cdb60"></a>使用以下命令启动openGauss及实例。</p>
<pre class="screen" id="zh-cn_topic_0237088800_scb4745d1e0354b08964cb64059269abd"><a name="zh-cn_topic_0237088800_scb4745d1e0354b08964cb64059269abd"></a><a name="zh-cn_topic_0237088800_scb4745d1e0354b08964cb64059269abd"></a><strong id="zh-cn_topic_0237088800_a18f6635d1e9247cd8c4429dd314e0da8"><a name="zh-cn_topic_0237088800_a18f6635d1e9247cd8c4429dd314e0da8"></a><a name="zh-cn_topic_0237088800_a18f6635d1e9247cd8c4429dd314e0da8"></a>gs_om -t start</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_r995473b742fe4e7298afcde8548fab89"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_a8100a17bcc1543efab3afbd108d4f8fa"><a name="zh-cn_topic_0237088800_a8100a17bcc1543efab3afbd108d4f8fa"></a><a name="zh-cn_topic_0237088800_a8100a17bcc1543efab3afbd108d4f8fa"></a>openGauss状态异常或openGauss实例异常</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_ac076faacd5a94c7999c39d9137fa28da"><a name="zh-cn_topic_0237088800_ac076faacd5a94c7999c39d9137fa28da"></a><a name="zh-cn_topic_0237088800_ac076faacd5a94c7999c39d9137fa28da"></a>检查各主机、实例状态，根据状态信息进行排查。</p>
<pre class="screen" id="zh-cn_topic_0237088800_sb2a81ac8ce9d43d186b7df97a888b807"><a name="zh-cn_topic_0237088800_sb2a81ac8ce9d43d186b7df97a888b807"></a><a name="zh-cn_topic_0237088800_sb2a81ac8ce9d43d186b7df97a888b807"></a><strong id="zh-cn_topic_0237088800_abc737b2279a4431c8c128ae587004994"><a name="zh-cn_topic_0237088800_abc737b2279a4431c8c128ae587004994"></a><a name="zh-cn_topic_0237088800_abc737b2279a4431c8c128ae587004994"></a>gs_check -i CheckClusterState</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_r86a2ced234c842c7be39c3323a7fb3a6"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p83146282381"><a name="zh-cn_topic_0237088800_p83146282381"></a><a name="zh-cn_topic_0237088800_p83146282381"></a>CheckDBParams（检查数据库参数）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1631619281380"><a name="zh-cn_topic_0237088800_p1631619281380"></a><a name="zh-cn_topic_0237088800_p1631619281380"></a>数据库参数错误</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1731892810380"><a name="zh-cn_topic_0237088800_p1731892810380"></a><a name="zh-cn_topic_0237088800_p1731892810380"></a>通过gs_guc工具修改数据库参数为指定值。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row195311634103914"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p14912850123913"><a name="zh-cn_topic_0237088800_p14912850123913"></a><a name="zh-cn_topic_0237088800_p14912850123913"></a>CheckDebugSwitch（检查调试日志）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1591345053914"><a name="zh-cn_topic_0237088800_p1591345053914"></a><a name="zh-cn_topic_0237088800_p1591345053914"></a>日志级别不正确</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p16915155023918"><a name="zh-cn_topic_0237088800_p16915155023918"></a><a name="zh-cn_topic_0237088800_p16915155023918"></a>使用gs_guc工具将log_min_messages改为指定内容。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row6896171624012"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p788611257409"><a name="zh-cn_topic_0237088800_p788611257409"></a><a name="zh-cn_topic_0237088800_p788611257409"></a>CheckDirPermissions（检查目录权限）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p108891525124013"><a name="zh-cn_topic_0237088800_p108891525124013"></a><a name="zh-cn_topic_0237088800_p108891525124013"></a>路径权限错误</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p489262512403"><a name="zh-cn_topic_0237088800_p489262512403"></a><a name="zh-cn_topic_0237088800_p489262512403"></a>修改对应目录权限为指定数值（750/700）。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen15893132512404"><a name="zh-cn_topic_0237088800_screen15893132512404"></a><a name="zh-cn_topic_0237088800_screen15893132512404"></a><strong id="zh-cn_topic_0237088800_b289782504019"><a name="zh-cn_topic_0237088800_b289782504019"></a><a name="zh-cn_topic_0237088800_b289782504019"></a>chmod 750 </strong><em id="zh-cn_topic_0237088800_i12898162514408"><a name="zh-cn_topic_0237088800_i12898162514408"></a><a name="zh-cn_topic_0237088800_i12898162514408"></a>DIR</em></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row119998504408"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p79996504406"><a name="zh-cn_topic_0237088800_p79996504406"></a><a name="zh-cn_topic_0237088800_p79996504406"></a>CheckReadonlyMode（检查只读模式）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1499919508407"><a name="zh-cn_topic_0237088800_p1499919508407"></a><a name="zh-cn_topic_0237088800_p1499919508407"></a>只读模式被打开</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p64041033184214"><a name="zh-cn_topic_0237088800_p64041033184214"></a><a name="zh-cn_topic_0237088800_p64041033184214"></a>确认<span id="zh-cn_topic_0237088800_text1114721213115"><a name="zh-cn_topic_0237088800_text1114721213115"></a><a name="zh-cn_topic_0237088800_text1114721213115"></a>数据库节点</span>所在磁盘使用率未超阈值(默认60%)且未在执行其他运维操作。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen621121517448"><a name="zh-cn_topic_0237088800_screen621121517448"></a><a name="zh-cn_topic_0237088800_screen621121517448"></a><strong id="zh-cn_topic_0237088800_b84701622114417"><a name="zh-cn_topic_0237088800_b84701622114417"></a><a name="zh-cn_topic_0237088800_b84701622114417"></a>gs_check -i CheckDataDiskUsage</strong>
<strong id="zh-cn_topic_0237088800_b18729929104417"><a name="zh-cn_topic_0237088800_b18729929104417"></a><a name="zh-cn_topic_0237088800_b18729929104417"></a>ps ux</strong></pre>
<p id="zh-cn_topic_0237088800_p09991650174014"><a name="zh-cn_topic_0237088800_p09991650174014"></a><a name="zh-cn_topic_0237088800_p09991650174014"></a>使用gs_guc工具关闭openGauss只读模式</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen6249173144516"><a name="zh-cn_topic_0237088800_screen6249173144516"></a><a name="zh-cn_topic_0237088800_screen6249173144516"></a><strong id="zh-cn_topic_0237088800_b153715124518"><a name="zh-cn_topic_0237088800_b153715124518"></a><a name="zh-cn_topic_0237088800_b153715124518"></a>gs_guc reload -N all -I all -c 'default_transaction_read_only = off' </strong>
<strong id="zh-cn_topic_0237088800_b1245113044618"><a name="zh-cn_topic_0237088800_b1245113044618"></a><a name="zh-cn_topic_0237088800_b1245113044618"></a>gs_guc reload -N all -I all -c 'default_transaction_read_only = off' </strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row599175395319"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p510012536530"><a name="zh-cn_topic_0237088800_p510012536530"></a><a name="zh-cn_topic_0237088800_p510012536530"></a>CheckEnvProfile（检查环境变量）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p110005325316"><a name="zh-cn_topic_0237088800_p110005325316"></a><a name="zh-cn_topic_0237088800_p110005325316"></a>环境变量不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p610055310537"><a name="zh-cn_topic_0237088800_p610055310537"></a><a name="zh-cn_topic_0237088800_p610055310537"></a>重新执行前置更新环境变量信息。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row163163045510"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1763115309555"><a name="zh-cn_topic_0237088800_p1763115309555"></a><a name="zh-cn_topic_0237088800_p1763115309555"></a>CheckBlockdev（检查磁盘预读块）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p6631103017557"><a name="zh-cn_topic_0237088800_p6631103017557"></a><a name="zh-cn_topic_0237088800_p6631103017557"></a>磁盘预读块大小不为16384</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p19256111175917"><a name="zh-cn_topic_0237088800_p19256111175917"></a><a name="zh-cn_topic_0237088800_p19256111175917"></a>使用gs_checkos设置预读块大小为16384KB，并写入自启动文件。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen24791715195913"><a name="zh-cn_topic_0237088800_screen24791715195913"></a><a name="zh-cn_topic_0237088800_screen24791715195913"></a><strong id="zh-cn_topic_0237088800_a37f4b6b7e9f84721a79b514c47f7bd09"><a name="zh-cn_topic_0237088800_a37f4b6b7e9f84721a79b514c47f7bd09"></a><a name="zh-cn_topic_0237088800_a37f4b6b7e9f84721a79b514c47f7bd09"></a>gs_checkos -i B3</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row5347173192514"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p153487314252"><a name="zh-cn_topic_0237088800_p153487314252"></a><a name="zh-cn_topic_0237088800_p153487314252"></a>CheckCursorNum（检查游标数）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p193481537259"><a name="zh-cn_topic_0237088800_p193481537259"></a><a name="zh-cn_topic_0237088800_p193481537259"></a>检查游标数失败</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p3348731258"><a name="zh-cn_topic_0237088800_p3348731258"></a><a name="zh-cn_topic_0237088800_p3348731258"></a>检查数据库能否正常连接，openGauss状态是否正常。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row75161117123413"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p10517617103418"><a name="zh-cn_topic_0237088800_p10517617103418"></a><a name="zh-cn_topic_0237088800_p10517617103418"></a>CheckPgxcgroup（检查重分布状态）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1551710176342"><a name="zh-cn_topic_0237088800_p1551710176342"></a><a name="zh-cn_topic_0237088800_p1551710176342"></a>有未完成重分布的pgxc_group表</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1451771773411"><a name="zh-cn_topic_0237088800_p1451771773411"></a><a name="zh-cn_topic_0237088800_p1451771773411"></a>继续完成扩容或缩容的数据重分布操作。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1876573389"><a name="zh-cn_topic_0237088800_screen1876573389"></a><a name="zh-cn_topic_0237088800_screen1876573389"></a><strong id="zh-cn_topic_0237088800_b4509810142511"><a name="zh-cn_topic_0237088800_b4509810142511"></a><a name="zh-cn_topic_0237088800_b4509810142511"></a>gs_expand、gs_shrink</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row6380929143913"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p83803290393"><a name="zh-cn_topic_0237088800_p83803290393"></a><a name="zh-cn_topic_0237088800_p83803290393"></a>CheckDiskFormat（检查磁盘配置）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p193801629163912"><a name="zh-cn_topic_0237088800_p193801629163912"></a><a name="zh-cn_topic_0237088800_p193801629163912"></a>各节点磁盘配置不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p103802298398"><a name="zh-cn_topic_0237088800_p103802298398"></a><a name="zh-cn_topic_0237088800_p103802298398"></a>将各节点的磁盘规格改为相同。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row7657194664218"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p965714465429"><a name="zh-cn_topic_0237088800_p965714465429"></a><a name="zh-cn_topic_0237088800_p965714465429"></a>CheckSpaceUsage（检查磁盘空间使用率）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p265724624220"><a name="zh-cn_topic_0237088800_p265724624220"></a><a name="zh-cn_topic_0237088800_p265724624220"></a>磁盘可用空间不足</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p16657204654216"><a name="zh-cn_topic_0237088800_p16657204654216"></a><a name="zh-cn_topic_0237088800_p16657204654216"></a>清理或扩展对应目录所在的磁盘。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row171664210433"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p4717124284316"><a name="zh-cn_topic_0237088800_p4717124284316"></a><a name="zh-cn_topic_0237088800_p4717124284316"></a>CheckInodeUsage（检查磁盘索引使用率）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p167170425439"><a name="zh-cn_topic_0237088800_p167170425439"></a><a name="zh-cn_topic_0237088800_p167170425439"></a>磁盘可用索引不足</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p87171742144316"><a name="zh-cn_topic_0237088800_p87171742144316"></a><a name="zh-cn_topic_0237088800_p87171742144316"></a>清理或扩展对应目录所在的磁盘。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row15876182315493"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1187710234491"><a name="zh-cn_topic_0237088800_p1187710234491"></a><a name="zh-cn_topic_0237088800_p1187710234491"></a>CheckSwapMemory（检查交换内存）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p178771423144911"><a name="zh-cn_topic_0237088800_p178771423144911"></a><a name="zh-cn_topic_0237088800_p178771423144911"></a>交换内存大于物理内存</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p787872315497"><a name="zh-cn_topic_0237088800_p787872315497"></a><a name="zh-cn_topic_0237088800_p787872315497"></a>将交换内存调小或关闭。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row196971126135019"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p196971526205014"><a name="zh-cn_topic_0237088800_p196971526205014"></a><a name="zh-cn_topic_0237088800_p196971526205014"></a>CheckLogicalBlock（检查磁盘逻辑块）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1697626125016"><a name="zh-cn_topic_0237088800_p1697626125016"></a><a name="zh-cn_topic_0237088800_p1697626125016"></a>磁盘逻辑块大小不为512</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p769712685010"><a name="zh-cn_topic_0237088800_p769712685010"></a><a name="zh-cn_topic_0237088800_p769712685010"></a>使用gs_checkos修改磁盘逻辑块大小为512KB，并写入开机自启动文件。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1815815388527"><a name="zh-cn_topic_0237088800_screen1815815388527"></a><a name="zh-cn_topic_0237088800_screen1815815388527"></a><strong id="zh-cn_topic_0237088800_a4d1dd9b1c51c4ef7b4de4915301fba89"><a name="zh-cn_topic_0237088800_a4d1dd9b1c51c4ef7b4de4915301fba89"></a><a name="zh-cn_topic_0237088800_a4d1dd9b1c51c4ef7b4de4915301fba89"></a>gs_checkos -i B4</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row1666211011542"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p166371019544"><a name="zh-cn_topic_0237088800_p166371019544"></a><a name="zh-cn_topic_0237088800_p166371019544"></a>CheckIOrequestqueue（检查IO请求）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p19663310115419"><a name="zh-cn_topic_0237088800_p19663310115419"></a><a name="zh-cn_topic_0237088800_p19663310115419"></a>IO请求值不为32768</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1466351016543"><a name="zh-cn_topic_0237088800_p1466351016543"></a><a name="zh-cn_topic_0237088800_p1466351016543"></a>使用gs_checkos设置IO请求值为32768，并写入开机自启动文件。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1411998114112"><a name="zh-cn_topic_0237088800_screen1411998114112"></a><a name="zh-cn_topic_0237088800_screen1411998114112"></a><strong id="zh-cn_topic_0237088800_b16986193163018"><a name="zh-cn_topic_0237088800_b16986193163018"></a><a name="zh-cn_topic_0237088800_b16986193163018"></a>gs_checkos -i B4</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row53211254551"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p6321192515557"><a name="zh-cn_topic_0237088800_p6321192515557"></a><a name="zh-cn_topic_0237088800_p6321192515557"></a>CheckCurConnCount（检查当前连接数）111</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p10157112913249"><a name="zh-cn_topic_0237088800_p10157112913249"></a><a name="zh-cn_topic_0237088800_p10157112913249"></a>当前连接数超过最大连接数的90%</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p7321725125516"><a name="zh-cn_topic_0237088800_p7321725125516"></a><a name="zh-cn_topic_0237088800_p7321725125516"></a>断开未使用的<span id="zh-cn_topic_0237088800_text17990203920177"><a name="zh-cn_topic_0237088800_text17990203920177"></a><a name="zh-cn_topic_0237088800_text17990203920177"></a>数据库主节点</span>连接。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row189075218413"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p889115284112"><a name="zh-cn_topic_0237088800_p889115284112"></a><a name="zh-cn_topic_0237088800_p889115284112"></a>CheckMaxAsyIOrequests（检查最大异步请求）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p4891195294115"><a name="zh-cn_topic_0237088800_p4891195294115"></a><a name="zh-cn_topic_0237088800_p4891195294115"></a>最大异步请求值小于104857600或当前节点<span id="zh-cn_topic_0237088800_text4117182533110"><a name="zh-cn_topic_0237088800_text4117182533110"></a><a name="zh-cn_topic_0237088800_text4117182533110"></a>数据库</span>实例数）*1048576</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p989115526414"><a name="zh-cn_topic_0237088800_p989115526414"></a><a name="zh-cn_topic_0237088800_p989115526414"></a>使用gs_checkos设置最大异步请求值为104857600和当前节点数据库实例数*1048576中的最大值。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen16746775301"><a name="zh-cn_topic_0237088800_screen16746775301"></a><a name="zh-cn_topic_0237088800_screen16746775301"></a><strong id="zh-cn_topic_0237088800_b47501716309"><a name="zh-cn_topic_0237088800_b47501716309"></a><a name="zh-cn_topic_0237088800_b47501716309"></a>gs_checkos -i B4</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row56992315212"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1270033625"><a name="zh-cn_topic_0237088800_p1270033625"></a><a name="zh-cn_topic_0237088800_p1270033625"></a>CheckMTU（检查MTU值）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1070016317217"><a name="zh-cn_topic_0237088800_p1070016317217"></a><a name="zh-cn_topic_0237088800_p1070016317217"></a>MTU值不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p177001310218"><a name="zh-cn_topic_0237088800_p177001310218"></a><a name="zh-cn_topic_0237088800_p177001310218"></a>设置各节点的MTU一致为1500或8192。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1517605014217"><a name="zh-cn_topic_0237088800_screen1517605014217"></a><a name="zh-cn_topic_0237088800_screen1517605014217"></a>ifconfig eth* MTU 1500</pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row11920171815580"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p092171819586"><a name="zh-cn_topic_0237088800_p092171819586"></a><a name="zh-cn_topic_0237088800_p092171819586"></a>CheckIOConfigure（检查IO配置）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p20921181811582"><a name="zh-cn_topic_0237088800_p20921181811582"></a><a name="zh-cn_topic_0237088800_p20921181811582"></a>IO配置不是deadline</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p792131875810"><a name="zh-cn_topic_0237088800_p792131875810"></a><a name="zh-cn_topic_0237088800_p792131875810"></a>使用gs_checkos设置IO配置为deadline，并写入开机自启动文件。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen12875105016019"><a name="zh-cn_topic_0237088800_screen12875105016019"></a><a name="zh-cn_topic_0237088800_screen12875105016019"></a><strong id="zh-cn_topic_0237088800_b1367013423017"><a name="zh-cn_topic_0237088800_b1367013423017"></a><a name="zh-cn_topic_0237088800_b1367013423017"></a>gs_checkos -i B4</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row8957102514412"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p895792513410"><a name="zh-cn_topic_0237088800_p895792513410"></a><a name="zh-cn_topic_0237088800_p895792513410"></a>CheckRXTX（检查RXTX值）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p17957192511413"><a name="zh-cn_topic_0237088800_p17957192511413"></a><a name="zh-cn_topic_0237088800_p17957192511413"></a>网卡RX/TX值不是4096</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p109571825345"><a name="zh-cn_topic_0237088800_p109571825345"></a><a name="zh-cn_topic_0237088800_p109571825345"></a>使用checkos设置openGauss使用的物理网卡RX/TX值为4096</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen91015216301"><a name="zh-cn_topic_0237088800_screen91015216301"></a><a name="zh-cn_topic_0237088800_screen91015216301"></a><strong id="zh-cn_topic_0237088800_b111316521305"><a name="zh-cn_topic_0237088800_b111316521305"></a><a name="zh-cn_topic_0237088800_b111316521305"></a>gs_checkos -i B5</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row3308116315"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p030101117314"><a name="zh-cn_topic_0237088800_p030101117314"></a><a name="zh-cn_topic_0237088800_p030101117314"></a>CheckPing（检查网络通畅）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p19301711537"><a name="zh-cn_topic_0237088800_p19301711537"></a><a name="zh-cn_topic_0237088800_p19301711537"></a>存在openGauss<span id="ph96210118250"><a name="ph96210118250"></a><a name="ph96210118250"></a> </span>IP无法ping通</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p183011115316"><a name="zh-cn_topic_0237088800_p183011115316"></a><a name="zh-cn_topic_0237088800_p183011115316"></a>检查异常ip间网络设置和状态、防火墙状态。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row5332175511518"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p123325551256"><a name="zh-cn_topic_0237088800_p123325551256"></a><a name="zh-cn_topic_0237088800_p123325551256"></a>CheckNetWorkDrop（检查网络丢包率）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1433213554512"><a name="zh-cn_topic_0237088800_p1433213554512"></a><a name="zh-cn_topic_0237088800_p1433213554512"></a>网络通信丢包率高于1%</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p73324555514"><a name="zh-cn_topic_0237088800_p73324555514"></a><a name="zh-cn_topic_0237088800_p73324555514"></a>检查对应IP间网络负载、状态。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row72441472713"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p16244071074"><a name="zh-cn_topic_0237088800_p16244071074"></a><a name="zh-cn_topic_0237088800_p16244071074"></a>CheckMultiQueue（检查网卡多队列）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1424418712712"><a name="zh-cn_topic_0237088800_p1424418712712"></a><a name="zh-cn_topic_0237088800_p1424418712712"></a>未开启网卡多队列并未将网卡中断绑定到不同CPU核心</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p192441273720"><a name="zh-cn_topic_0237088800_p192441273720"></a><a name="zh-cn_topic_0237088800_p192441273720"></a>开启网卡多队列并将网卡队列中断绑定到不同的CPU核心。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row103121887813"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p103129812811"><a name="zh-cn_topic_0237088800_p103129812811"></a><a name="zh-cn_topic_0237088800_p103129812811"></a>CheckEncoding（检查编码格式）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1312082085"><a name="zh-cn_topic_0237088800_p1312082085"></a><a name="zh-cn_topic_0237088800_p1312082085"></a>各节点编码格式不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p53121581783"><a name="zh-cn_topic_0237088800_p53121581783"></a><a name="zh-cn_topic_0237088800_p53121581783"></a>在/etc/profile中写入一致的编码信息。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen139872252911"><a name="zh-cn_topic_0237088800_screen139872252911"></a><a name="zh-cn_topic_0237088800_screen139872252911"></a><strong id="zh-cn_topic_0237088800_b69061554381"><a name="zh-cn_topic_0237088800_b69061554381"></a><a name="zh-cn_topic_0237088800_b69061554381"></a>echo "export LANG=XXX" &gt;&gt; /etc/profile</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row143013810102"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p43016891011"><a name="zh-cn_topic_0237088800_p43016891011"></a><a name="zh-cn_topic_0237088800_p43016891011"></a>CheckFirewall（检查防火墙）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p17304812106"><a name="zh-cn_topic_0237088800_p17304812106"></a><a name="zh-cn_topic_0237088800_p17304812106"></a>防火墙未关闭</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p0309814102"><a name="zh-cn_topic_0237088800_p0309814102"></a><a name="zh-cn_topic_0237088800_p0309814102"></a>关闭防火墙服务。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen168681239101015"><a name="zh-cn_topic_0237088800_screen168681239101015"></a><a name="zh-cn_topic_0237088800_screen168681239101015"></a><strong id="zh-cn_topic_0237088800_b13971145173814"><a name="zh-cn_topic_0237088800_b13971145173814"></a><a name="zh-cn_topic_0237088800_b13971145173814"></a>redHat(CentOS)7.x：systemctl status firewalld.service</strong>
<strong id="zh-cn_topic_0237088800_b797285113388"><a name="zh-cn_topic_0237088800_b797285113388"></a><a name="zh-cn_topic_0237088800_b797285113388"></a>redHat(CentOS)6.x：service iptables down</strong>
<strong id="zh-cn_topic_0237088800_b1597355114383"><a name="zh-cn_topic_0237088800_b1597355114383"></a><a name="zh-cn_topic_0237088800_b1597355114383"></a>SuSE：SuSEfirewall2 down</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row139635453144"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1896424513148"><a name="zh-cn_topic_0237088800_p1896424513148"></a><a name="zh-cn_topic_0237088800_p1896424513148"></a>CheckKernelVer（检查内核版本）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p17965445171411"><a name="zh-cn_topic_0237088800_p17965445171411"></a><a name="zh-cn_topic_0237088800_p17965445171411"></a>内核版本不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p188823517155"><a name="zh-cn_topic_0237088800_p188823517155"></a><a name="zh-cn_topic_0237088800_p188823517155"></a>使用gs_replace替换不一致的节点。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen7869785161"><a name="zh-cn_topic_0237088800_screen7869785161"></a><a name="zh-cn_topic_0237088800_screen7869785161"></a><strong id="zh-cn_topic_0237088800_b5859164816381"><a name="zh-cn_topic_0237088800_b5859164816381"></a><a name="zh-cn_topic_0237088800_b5859164816381"></a>gs_replace</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row91332514163"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p171362517162"><a name="zh-cn_topic_0237088800_p171362517162"></a><a name="zh-cn_topic_0237088800_p171362517162"></a>CheckMaxHandle（检查最大文件句柄数）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1513122561610"><a name="zh-cn_topic_0237088800_p1513122561610"></a><a name="zh-cn_topic_0237088800_p1513122561610"></a>最大文件句柄数小于1000000</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p213202561616"><a name="zh-cn_topic_0237088800_p213202561616"></a><a name="zh-cn_topic_0237088800_p213202561616"></a>设置91-nofile.conf/90-nofile.conf最大文件句柄数软硬限制为1000000。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1968194271716"><a name="zh-cn_topic_0237088800_screen1968194271716"></a><a name="zh-cn_topic_0237088800_screen1968194271716"></a><strong id="zh-cn_topic_0237088800_a5744208a05614a3aa44d63fb9ae29de9"><a name="zh-cn_topic_0237088800_a5744208a05614a3aa44d63fb9ae29de9"></a><a name="zh-cn_topic_0237088800_a5744208a05614a3aa44d63fb9ae29de9"></a>gs_checkos -i B2</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row139205692318"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1910456112311"><a name="zh-cn_topic_0237088800_p1910456112311"></a><a name="zh-cn_topic_0237088800_p1910456112311"></a>CheckNTPD（检查时间同步服务）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p8101756122319"><a name="zh-cn_topic_0237088800_p8101756122319"></a><a name="zh-cn_topic_0237088800_p8101756122319"></a>NTPD服务未开启或时间误差超过一分钟</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p17101856122313"><a name="zh-cn_topic_0237088800_p17101856122313"></a><a name="zh-cn_topic_0237088800_p17101856122313"></a>开启NTPD服务并设置时钟一致。</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row685815112315"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p16859411133113"><a name="zh-cn_topic_0237088800_p16859411133113"></a><a name="zh-cn_topic_0237088800_p16859411133113"></a>CheckOSVer（检查操作系统版本）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1686018119318"><a name="zh-cn_topic_0237088800_p1686018119318"></a><a name="zh-cn_topic_0237088800_p1686018119318"></a>操作系统不被支持或不在同一混搭列表</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p2023921573812"><a name="zh-cn_topic_0237088800_p2023921573812"></a><a name="zh-cn_topic_0237088800_p2023921573812"></a>使用gs_replace将异常节点替换为受支持系统或在同一混搭列表内的系统的节点。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen108301419143517"><a name="zh-cn_topic_0237088800_screen108301419143517"></a><a name="zh-cn_topic_0237088800_screen108301419143517"></a><strong id="zh-cn_topic_0237088800_b83631943203811"><a name="zh-cn_topic_0237088800_b83631943203811"></a><a name="zh-cn_topic_0237088800_b83631943203811"></a>gs_replace</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row11180112703514"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p31811427183514"><a name="zh-cn_topic_0237088800_p31811427183514"></a><a name="zh-cn_topic_0237088800_p31811427183514"></a>CheckSysParams（检查操作系统参数）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p618112271359"><a name="zh-cn_topic_0237088800_p618112271359"></a><a name="zh-cn_topic_0237088800_p618112271359"></a>操作系统参数设置不满足要求</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p13181827103517"><a name="zh-cn_topic_0237088800_p13181827103517"></a><a name="zh-cn_topic_0237088800_p13181827103517"></a>使用gs_checkos进行参数设置或手动设置。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen6658241153720"><a name="zh-cn_topic_0237088800_screen6658241153720"></a><a name="zh-cn_topic_0237088800_screen6658241153720"></a><strong id="zh-cn_topic_0237088800_b1266274123710"><a name="zh-cn_topic_0237088800_b1266274123710"></a><a name="zh-cn_topic_0237088800_b1266274123710"></a>gs_checkos -i B1</strong>
<strong id="zh-cn_topic_0237088800_b18837153613816"><a name="zh-cn_topic_0237088800_b18837153613816"></a><a name="zh-cn_topic_0237088800_b18837153613816"></a>vim /etc/sysctl.conf</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row489662843819"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1589682816380"><a name="zh-cn_topic_0237088800_p1589682816380"></a><a name="zh-cn_topic_0237088800_p1589682816380"></a>CheckTHP（检查THP服务）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p7896728193820"><a name="zh-cn_topic_0237088800_p7896728193820"></a><a name="zh-cn_topic_0237088800_p7896728193820"></a>THP服务未开启</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1889712883811"><a name="zh-cn_topic_0237088800_p1889712883811"></a><a name="zh-cn_topic_0237088800_p1889712883811"></a>使用gs_checkos设置THP服务</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen0120925104013"><a name="zh-cn_topic_0237088800_screen0120925104013"></a><a name="zh-cn_topic_0237088800_screen0120925104013"></a><strong id="zh-cn_topic_0237088800_b15124825194015"><a name="zh-cn_topic_0237088800_b15124825194015"></a><a name="zh-cn_topic_0237088800_b15124825194015"></a>gs_checkos -i B6</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row27496316404"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p9749173119408"><a name="zh-cn_topic_0237088800_p9749173119408"></a><a name="zh-cn_topic_0237088800_p9749173119408"></a>CheckTimeZone（检查时区）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p167491731114015"><a name="zh-cn_topic_0237088800_p167491731114015"></a><a name="zh-cn_topic_0237088800_p167491731114015"></a>时区不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p157491631164019"><a name="zh-cn_topic_0237088800_p157491631164019"></a><a name="zh-cn_topic_0237088800_p157491631164019"></a>设置各节点为同一时区</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen916593919411"><a name="zh-cn_topic_0237088800_screen916593919411"></a><a name="zh-cn_topic_0237088800_screen916593919411"></a><strong id="zh-cn_topic_0237088800_b9170153914118"><a name="zh-cn_topic_0237088800_b9170153914118"></a><a name="zh-cn_topic_0237088800_b9170153914118"></a><strong id="zh-cn_topic_0237088800_aa13be711ac2449d6b442eb28ed881769"><a name="zh-cn_topic_0237088800_aa13be711ac2449d6b442eb28ed881769"></a><a name="zh-cn_topic_0237088800_aa13be711ac2449d6b442eb28ed881769"></a>cp /usr/share/zoneinfo/</strong><em id="zh-cn_topic_0237088800_a196df0a7625542ceb268ba65152b106f"><a name="zh-cn_topic_0237088800_a196df0a7625542ceb268ba65152b106f"></a><a name="zh-cn_topic_0237088800_a196df0a7625542ceb268ba65152b106f"></a>$主时区/$次时区</em><strong id="zh-cn_topic_0237088800_a9dfb61af5e37464ebeae23dc470fba83"><a name="zh-cn_topic_0237088800_a9dfb61af5e37464ebeae23dc470fba83"></a><a name="zh-cn_topic_0237088800_a9dfb61af5e37464ebeae23dc470fba83"></a> /etc/localtime</strong></strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row27701488444"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p877113804418"><a name="zh-cn_topic_0237088800_p877113804418"></a><a name="zh-cn_topic_0237088800_p877113804418"></a>CheckCPU（检查CPU）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1577188114417"><a name="zh-cn_topic_0237088800_p1577188114417"></a><a name="zh-cn_topic_0237088800_p1577188114417"></a>CPU占用过高或IO等待过高</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p177712086441"><a name="zh-cn_topic_0237088800_p177712086441"></a><a name="zh-cn_topic_0237088800_p177712086441"></a>进行CPU配置升级或磁盘性能升级</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row84714914619"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1748194910469"><a name="zh-cn_topic_0237088800_p1748194910469"></a><a name="zh-cn_topic_0237088800_p1748194910469"></a>CheckSshdService（检查SSHD服务）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1048649184612"><a name="zh-cn_topic_0237088800_p1048649184612"></a><a name="zh-cn_topic_0237088800_p1048649184612"></a>未开启SSHD服务</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p24814914615"><a name="zh-cn_topic_0237088800_p24814914615"></a><a name="zh-cn_topic_0237088800_p24814914615"></a>启动SSHD服务并写入开机自启动文件</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen10798193611615"><a name="zh-cn_topic_0237088800_screen10798193611615"></a><a name="zh-cn_topic_0237088800_screen10798193611615"></a><strong id="zh-cn_topic_0237088800_b3683174182517"><a name="zh-cn_topic_0237088800_b3683174182517"></a><a name="zh-cn_topic_0237088800_b3683174182517"></a>server sshd start</strong>
<strong id="zh-cn_topic_0237088800_b768434192519"><a name="zh-cn_topic_0237088800_b768434192519"></a><a name="zh-cn_topic_0237088800_b768434192519"></a>echo "server sshd start" &gt;&gt; initFile</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row761012184719"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p8611131811717"><a name="zh-cn_topic_0237088800_p8611131811717"></a><a name="zh-cn_topic_0237088800_p8611131811717"></a>CheckSshdConfig（检查SSHD配置）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p261131814717"><a name="zh-cn_topic_0237088800_p261131814717"></a><a name="zh-cn_topic_0237088800_p261131814717"></a>SSHD服务配置错误</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p66116181873"><a name="zh-cn_topic_0237088800_p66116181873"></a><a name="zh-cn_topic_0237088800_p66116181873"></a>设置SSHD服务，</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen07161551184019"><a name="zh-cn_topic_0237088800_screen07161551184019"></a><a name="zh-cn_topic_0237088800_screen07161551184019"></a><strong id="b889318112578"><a name="b889318112578"></a><a name="b889318112578"></a>PasswordAuthentication=no;</strong>
<strong id="b290541115720"><a name="b290541115720"></a><a name="b290541115720"></a>MaxStartups=1000;</strong>
<strong id="b119075111578"><a name="b119075111578"></a><a name="b119075111578"></a>UseDNS=yes;</strong>
<strong id="b7909131112579"><a name="b7909131112579"></a><a name="b7909131112579"></a>ClientAliveInterval=10800/ClientAliveInterval=0</strong></pre>
<p id="zh-cn_topic_0237088800_p109911155407"><a name="zh-cn_topic_0237088800_p109911155407"></a><a name="zh-cn_topic_0237088800_p109911155407"></a>并重启服务：</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen5262166812"><a name="zh-cn_topic_0237088800_screen5262166812"></a><a name="zh-cn_topic_0237088800_screen5262166812"></a><strong id="zh-cn_topic_0237088800_b16208121182514"><a name="zh-cn_topic_0237088800_b16208121182514"></a><a name="zh-cn_topic_0237088800_b16208121182514"></a>server sshd start</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row102017179910"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1020212171913"><a name="zh-cn_topic_0237088800_p1020212171913"></a><a name="zh-cn_topic_0237088800_p1020212171913"></a>CheckCrondService（检查Crond服务）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p102023178910"><a name="zh-cn_topic_0237088800_p102023178910"></a><a name="zh-cn_topic_0237088800_p102023178910"></a>Crond服务未启动</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p764625919914"><a name="zh-cn_topic_0237088800_p764625919914"></a><a name="zh-cn_topic_0237088800_p764625919914"></a>安装Crond服务并启用</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row13989162519134"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p5990192511132"><a name="zh-cn_topic_0237088800_p5990192511132"></a><a name="zh-cn_topic_0237088800_p5990192511132"></a>CheckStack（检查堆栈大小）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1899019257131"><a name="zh-cn_topic_0237088800_p1899019257131"></a><a name="zh-cn_topic_0237088800_p1899019257131"></a>堆栈大小小于3072</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p16990192510139"><a name="zh-cn_topic_0237088800_p16990192510139"></a><a name="zh-cn_topic_0237088800_p16990192510139"></a>使用gs_checkos设置为3072并重启堆栈值过小进程。</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen724123081415"><a name="zh-cn_topic_0237088800_screen724123081415"></a><a name="zh-cn_topic_0237088800_screen724123081415"></a><strong id="zh-cn_topic_0237088800_b1724523061413"><a name="zh-cn_topic_0237088800_b1724523061413"></a><a name="zh-cn_topic_0237088800_b1724523061413"></a>gs_checkos -i B2</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row1314417920158"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p111449916154"><a name="zh-cn_topic_0237088800_p111449916154"></a><a name="zh-cn_topic_0237088800_p111449916154"></a>CheckNoCheckSum（检查NoCheckSum参数）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1014419941510"><a name="zh-cn_topic_0237088800_p1014419941510"></a><a name="zh-cn_topic_0237088800_p1014419941510"></a>NoCheckSum设置错误或不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p01441192152"><a name="zh-cn_topic_0237088800_p01441192152"></a><a name="zh-cn_topic_0237088800_p01441192152"></a>设置各节点的NoCheckSum值一致（存在redHat6.4/6.5且为bond0时全部设为Y，否则全部设为N）</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen0838115441612"><a name="zh-cn_topic_0237088800_screen0838115441612"></a><a name="zh-cn_topic_0237088800_screen0838115441612"></a><strong id="zh-cn_topic_0237088800_b13269195722416"><a name="zh-cn_topic_0237088800_b13269195722416"></a><a name="zh-cn_topic_0237088800_b13269195722416"></a>echo Y &gt; /sys/module/sctp/parameters/no_checksums</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row1441717382175"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p10417338181711"><a name="zh-cn_topic_0237088800_p10417338181711"></a><a name="zh-cn_topic_0237088800_p10417338181711"></a>CheckSysPortRange（检查系统端口设置）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p164175380179"><a name="zh-cn_topic_0237088800_p164175380179"></a><a name="zh-cn_topic_0237088800_p164175380179"></a>系统ip端口不在预期范围内或openGauss端口在系统ip端口内</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1041723851717"><a name="zh-cn_topic_0237088800_p1041723851717"></a><a name="zh-cn_topic_0237088800_p1041723851717"></a>设置系统ip端口范围参数到26000-65535之中；设置openGauss端口在系统ip端口范围外</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen687583717203"><a name="zh-cn_topic_0237088800_screen687583717203"></a><a name="zh-cn_topic_0237088800_screen687583717203"></a><strong id="zh-cn_topic_0237088800_b38842374205"><a name="zh-cn_topic_0237088800_b38842374205"></a><a name="zh-cn_topic_0237088800_b38842374205"></a>vim /etc/sysctl.conf</strong></pre>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row15945155362019"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p79451553112013"><a name="zh-cn_topic_0237088800_p79451553112013"></a><a name="zh-cn_topic_0237088800_p79451553112013"></a>CheckMemInfo（检查内存信息）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p19945153142017"><a name="zh-cn_topic_0237088800_p19945153142017"></a><a name="zh-cn_topic_0237088800_p19945153142017"></a>各节点内存大小不一致</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p18945105320202"><a name="zh-cn_topic_0237088800_p18945105320202"></a><a name="zh-cn_topic_0237088800_p18945105320202"></a>使用相同规格的物理内存</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row11243102619211"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p19243526122113"><a name="zh-cn_topic_0237088800_p19243526122113"></a><a name="zh-cn_topic_0237088800_p19243526122113"></a>CheckHyperThread（检查超线程）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p192432266214"><a name="zh-cn_topic_0237088800_p192432266214"></a><a name="zh-cn_topic_0237088800_p192432266214"></a>未开启CPU超线程</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p924322615213"><a name="zh-cn_topic_0237088800_p924322615213"></a><a name="zh-cn_topic_0237088800_p924322615213"></a>开启CPU超线程</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row1813414713215"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p171341847202114"><a name="zh-cn_topic_0237088800_p171341847202114"></a><a name="zh-cn_topic_0237088800_p171341847202114"></a>CheckTableSpace（检查表空间）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p1413454782118"><a name="zh-cn_topic_0237088800_p1413454782118"></a><a name="zh-cn_topic_0237088800_p1413454782118"></a>表空间路径和openGauss路径存在嵌套或表空间路径相互存在嵌套</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p1013412471215"><a name="zh-cn_topic_0237088800_p1013412471215"></a><a name="zh-cn_topic_0237088800_p1013412471215"></a>将表空间数据迁移到路径合法的表空间中</p>
</td>
</tr>
<tr id="zh-cn_topic_0237088800_row1710581982312"><td class="cellrowborder" valign="top" width="20.59%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0237088800_p1910511197237"><a name="zh-cn_topic_0237088800_p1910511197237"></a><a name="zh-cn_topic_0237088800_p1910511197237"></a>CheckSctpService（检查SCTP服务）</p>
</td>
<td class="cellrowborder" valign="top" width="22.21%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0237088800_p3105151972315"><a name="zh-cn_topic_0237088800_p3105151972315"></a><a name="zh-cn_topic_0237088800_p3105151972315"></a>未开启SCTP服务</p>
</td>
<td class="cellrowborder" valign="top" width="57.199999999999996%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0237088800_p8105191917231"><a name="zh-cn_topic_0237088800_p8105191917231"></a><a name="zh-cn_topic_0237088800_p8105191917231"></a>部署并开启SCTP服务</p>
<pre class="screen" id="zh-cn_topic_0237088800_screen1663719183242"><a name="zh-cn_topic_0237088800_screen1663719183242"></a><a name="zh-cn_topic_0237088800_screen1663719183242"></a><strong id="zh-cn_topic_0237088800_b1364221852411"><a name="zh-cn_topic_0237088800_b1364221852411"></a><a name="zh-cn_topic_0237088800_b1364221852411"></a>modprobe sctp</strong></pre>
</td>
</tr>
</tbody>
</table>

