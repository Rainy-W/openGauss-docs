# 修改操作系统配置<a name="ZH-CN_TOPIC_0270171695"></a>

## 关闭操作系统防火墙<a name="zh-cn_topic_0249784574_section178235734314"></a>

为了在防火墙开启的状态下，确保openGauss的正常使用。用户需要将同openGauss相关的服务、协议、IP以及端口添加到openGauss各主机的防火墙白名单中。

以openEuler操作系统为例，假设openGauss信息如[表 openGauss信息](#zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_table4312170510523)所示。

**表 1**  openGauss信息

<a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_table4312170510523"></a>
<table><thead align="left"><tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row3906252510523"><th class="cellrowborder" valign="top" width="19.36%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2242248110523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2242248110523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2242248110523"></a>主机名称</p>
</th>
<th class="cellrowborder" valign="top" width="30.64%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43549248144742"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43549248144742"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43549248144742"></a>内部IP</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p428167710523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p428167710523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p428167710523"></a>外部IP</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row3853509710523"><td class="cellrowborder" valign="top" width="19.36%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3433512010523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3433512010523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3433512010523"></a>plat1</p>
</td>
<td class="cellrowborder" valign="top" width="30.64%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p37828238144742"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p37828238144742"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p37828238144742"></a>192.168.0.11</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2968135610523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2968135610523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2968135610523"></a>10.10.0.11</p>
</td>
</tr>
<tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row6580562010523"><td class="cellrowborder" valign="top" width="19.36%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2865497810523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2865497810523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p2865497810523"></a>plat2</p>
</td>
<td class="cellrowborder" valign="top" width="30.64%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p44188448144742"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p44188448144742"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p44188448144742"></a>192.168.0.12</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p40149025111953"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p40149025111953"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p40149025111953"></a>10.10.0.12</p>
</td>
</tr>
<tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row1862231610523"><td class="cellrowborder" valign="top" width="19.36%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3201261810523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3201261810523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p3201261810523"></a>plat3</p>
</td>
<td class="cellrowborder" valign="top" width="30.64%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p22494559144742"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p22494559144742"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p22494559144742"></a>192.168.0.13</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p4288526910523"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p4288526910523"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p4288526910523"></a>10.10.0.13</p>
</td>
</tr>
<tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row45383578144959"><td class="cellrowborder" valign="top" width="19.36%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p5799022144959"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p5799022144959"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p5799022144959"></a>plat4</p>
</td>
<td class="cellrowborder" valign="top" width="30.64%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p67067662144959"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p67067662144959"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p67067662144959"></a>192.168.0.14</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p63771559144959"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p63771559144959"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p63771559144959"></a>10.10.0.14</p>
</td>
</tr>
<tr id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_row8271151181015"><td class="cellrowborder" valign="top" width="19.36%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65983533181015"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65983533181015"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65983533181015"></a>管理网络</p>
</td>
<td class="cellrowborder" valign="top" width="30.64%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43065967181015"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43065967181015"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p43065967181015"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65791326181015"><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65791326181015"></a><a name="zh-cn_topic_0249784574_zh-cn_topic_0241802566_zh-cn_topic_0085434636_zh-cn_topic_0059782018_p65791326181015"></a>10.10.64.236</p>
</td>
</tr>
</tbody>
</table>

**操作步骤**

目前仅支持在防火墙关闭的状态下进行安装。

1.  修改/etc/selinux/config文件中的“SELINUX“值为“disabled“。
    1.  使用VIM打开config文件。

        ```
        vim /etc/selinux/config
        ```

    2.  修改“SELINUX“的值“disabled“。

        ```
        SELINUX=disabled
        ```

2.  重新启动操作系统。

    ```
    reboot
    ```

3.  检查防火墙是否关闭。

    ```
    systemctl status firewalld
    ```

    若防火墙未关闭，请执行[4](#zh-cn_topic_0249784574_li17330102819394)；

    若防火墙已关闭，则无需再关闭防火墙。

4.  <a name="zh-cn_topic_0249784574_li17330102819394"></a>关闭防火墙。

    ```
    systemctl disable firewalld.service
    systemctl stop firewalld.service
    ```

5.  在其他主机上重复步骤1到步骤4。

## 设置字符集参数<a name="zh-cn_topic_0249784574_section17609182719467"></a>

将各数据库节点的字符集设置为相同的字符集，可以在/etc/profile文件中添加"export LANG=XXX"（XXX为Unicode编码）。

```
vim /etc/profile
```

## 设置时区和时间<a name="zh-cn_topic_0249784574_section2058219344711"></a>

将各数据库节点的时区设置为相同时区，可以将/usr/share/zoneinfo/目录下的时区文件拷贝为/etc/localtime文件。

```
cp /usr/share/zoneinfo/$地区/$时区 /etc/localtime
```

>![](public_sys-resources/icon-note.gif) **说明：** 
>_$地区/$时区为需要设置时区的信息，例如：Asia_/Shanghai。

使用date -s命令将各主机的时间设置为统一时间，举例如下。

```
date -s Mon May 11 16:42:11 CST 2020
```

>![](public_sys-resources/icon-note.gif) **说明：** 
>可以通过date命令查询主机时区。

## 关闭swap交换内存<a name="zh-cn_topic_0249784574_section1868124934810"></a>

在各数据库节点上，使用swapoff -a命令将交换内存关闭。

```
swapoff -a
```

## 设置网卡MTU值<a name="zh-cn_topic_0249784574_section23866245014"></a>

将各数据库节点的网卡MTU值设置为相同大小。对于X86，MTU值推荐1500；对于ARM，MTU值推荐8192。

```
ifconfig 网卡编号 mtu 值
```

